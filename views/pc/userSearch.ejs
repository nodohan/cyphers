<!DOCTYPE html>
<html lang="ko">

<head>

    <%- include  ("../layout/head") %>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/2.0.3/js.cookie.js"></script>
        <script type="text/javascript">
            pageName = "pcUserSearch";

            var userData = {};

            $(document).ready(function() {
                let nickname = '<%=searchNickname%>';
                if (nickname != '') {
                    $("#nickNames").val(nickname);
                    search('nickNames', 'con1_2');
                }

                showSearchHistory();
                $("#partyShow").on("change", () => checkVisibility("partyShow"));
                $("#positionShow").on("change", () => checkVisibility("positionShow"));
                $("#mostCharShow").on("change", () => checkVisibility("mostCharShow"));
                $("#recentShow").on("change", () => checkVisibility("recentShow"));
                $("#tackShow").on("change", () => tackUse());
                tackUse();

                resetGameType();
                $("input[name='gameType']").on("change", resetGameType);
            });

            function resetGameType() {
                const val = $("input[name='gameType']:checked").val();
                clearDiv('con1_2');
                clearDiv('con2_2');
                $(".gameTypeText").text(val == 'rating' ? '[Í≥µÏãùÏ†Ñ]' : '[ÏùºÎ∞òÏ†Ñ]');

                // modalDivÏùò ÏûêÏãù div Ï§ë idÍ∞Ä templateModalÏù¥ ÏïÑÎãå Í≤ÉÏùÑ Ï∞æÏïÑ ÏÇ≠Ï†ú
                $('#modalDiv > div:not(#templateModal)').remove();
                userData = {};

                Cookies.set('gameType', val, {
                    expires: 7
                });
            }

            function getCookie() {
                setCheckbox('partyShow', Cookies.get('playParty'));
                setCheckbox('positionShow', Cookies.get('positionDiv'));
                setCheckbox('mostCharShow', Cookies.get('mostCharDiv'));
                setCheckbox('recentShow', Cookies.get('recentlyDiv'));
                setCheckbox('tackShow', Cookies.get('tackShow'));

                let gameType = Cookies.get('gameType');
                if (gameType == null || gameType == '') {
                    gameType = 'rating';
                }
                $(`input[name='gameType'][value='${gameType}']`).click();
            }

            function setCheckbox(id, checked) {
                checked = (checked == null || checked == 'true' || checked == true);
                const chkbox = $("input:checkbox[id='" + id + "']");
                chkbox.attr("checked", checked);
                chkbox.prop('checked', checked);
            }

            function checkVisibility(id) {
                console.log(id);
                const isShow = $("#" + id).is(":checked");
                setVisible(id, isShow);
                Cookies.set(id, isShow, {
                    expires: 7
                });
            }

            const visibleTackDiv = () => {
                if ($("#tackShow").is(":checked")) {
                    //$("#mainUserSearch").css("width", "88%");
                    //$(".top").css("width", "88%");
                    $("#con3").show();
                } else {
                    // $("#mainUserSearch").css("width", "77%");
                    // $(".top").css("width", "77%");
                    $("#con3").hide();
                }
            }

            const tackUse = () => {
                const checked = $("#tackShow").is(":checked");
                Cookies.set("tackShow", checked, {
                    expires: 30
                });

                visibleTackDiv();
                $(".con").css("width", checked ? "29%": "38%");

                //1. Í≥†Ï†ïÏùÑ ÏÇ¨Ïö©ÌïòÎäî Í≤ΩÏö∞
                if (checked) {
                    let userList = [];
                    if (Cookies.get('tackUserList')) {
                        userList = Cookies.get('tackUserList').split(",");
                    }
                    userList.forEach(divId => {
                        const divItem = $("#" + divId);
                        if (!moveToTack(divId)) {
                            // Ïù¥ÎØ∏ Ï°¥Ïû¨ÌïòÎäî divÏù∏Í≤ΩÏö∞ Í∞ÄÏ†∏ÏôÄÎ≥¥Í≥†
                            // Ï°¥Ïû¨ÌïòÏßÄ ÏïäÎäî Í≤ΩÏö∞ Í≤ÄÏÉâ
                            let userNm = divId.split("_")[0];
                            $("#nickNames3").val(userNm);
                            search('nickNames3', 'con3_2');
                        }
                    });
                } else {
                    //2. Í≥†Ï†ïÏùÑ ÏÇ¨Ïö©ÌïòÏßÄ ÏïäÎäî Í≤ΩÏö∞
                    Cookies.set("tackUserList", '', {
                        expires: 30
                    });
                    $("#con3_2").find(".infoDiv").each((index, item) => {
                        $(item).find(".tackRemove").hide();
                        $(item).find(".tack").show();
                        $("#con1_2").prepend(item);
                    });
                }
            };

            const addTackUser = (divId) => {
                updateTackCookie(divId, "add");
                visibleTackDiv();
                moveToTack(divId);
            }

            const removeTackUser = (divId) => {
                updateTackCookie(divId, "remove");
                $("#" + divId).remove();
            }

            const updateTackCookie = (divId, action) => {
                let userList = [];
                if (Cookies.get('tackUserList')) {
                    userList = Cookies.get('tackUserList').split(",");
                }

                const isShow = action == "add";
                const index = userList.indexOf(divId);
                if (action == "add") {
                    if (index < 0) {
                        userList.push(divId);
                    }
                } else if (action == "remove") {
                    if (index >= 0) {
                        userList.splice(index, 1);
                    }
                }

                setCheckbox("tackShow", isShow);
                Cookies.set("tackShow", isShow, {
                    expires: 30
                });
                Cookies.set("tackUserList", userList.join(","), {
                    expires: 30
                });
            }

            const moveToTack = (divId) => {
                const divItem = $("#" + divId);
                if (divItem.length != 0) {
                    divItem.find(".tackRemove").show();
                    divItem.find(".tack").hide();
                    $("#con3").find("#con3_2").prepend(divItem);
                }
                return divItem.length != 0;
            }

            function setVisible(classId, isShow) {
                let div = $("." + classId);
                isShow ? div.show() : div.hide();
            }

            function setUserInfo(gameType, divName, data) {
                const nickname = data.nickname;
                if (userData[nickname] == null) {
                    userData[nickname] = data;
                }

                if(gameType == 'rating') {
                    const { playerId } = data;
                    callTeamRate(playerId, divName == "con1_2" ? "blue" : "red", drawTeamRate);

                    drawRatingUserInfo(gameType, divName, data, nickname);
                } else {
                    drawNormalUserInfo(gameType, divName, data, nickname);
                }
            }

            const drawTeamRate  = (team, data) => {
                console.log("data", data);
                const divId  = team == "blue" ? "teamRateBlue" : "teamRateRed" ;
                const {rate, total} = data;
                $("."+divId).empty().text(`ÌåÄÏäπÎ•†: ${total}Ï†Ñ ÏäπÎ•†:${rate} `);
            }

            const drawRatingUserInfo = (gameType, divName, data, nickname) => {
                var userDivId = getUserDivId(gameType, nickname);
                if ($("#" + userDivId).length != 0) {
                    return;
                }

                //Í∏∞Î≥∏ Ï†ïÎ≥¥ 
                var clone = $("#template").clone();
                clone.attr("id", userDivId);
                if (divName == "con2_2") {
                    clone.removeClass("infoDiv");
                    clone.addClass("infoDivRed");
                }

                defaultInfo(userDivId, gameType, clone, data, divName != "con3_2");

                var rows = data.matches.rows.filter(row => row.playInfo.playTypeName == "Ï†ïÏÉÅ" || row.playInfo.result == "ÏäπÎ¶¨" ).sort((a, b) => new Date(b.date) - new Date(a.date));
                //printChar(rows);

                //ÌååÌã∞Î≥Ñ
                drawPartyType(userDivId, clone.find("#playParty"), rows);

                //Ìè¨ÏßÄÏÖòÎ≥Ñ 
                getUserPositionInfo(data.playerId, clone.find("#positionDiv"));
                //drawPosition(clone, rows, nickname, appendPlayTypeInfo);

                //ÏµúÍ∑º 10Í≤ΩÍ∏∞ Í≤∞Í≥º
                drawRecently(clone, rows, userDivId);

                //ÏûêÏ£ºÌïòÎäî Ï∫êÎ¶≠
                var userChar = extractChar(rows, sortCase);
                drawOften(clone, userChar, drawCharCardVer, nickname);

                clone.show();
                $("#" + divName).prepend(clone);
            }

            const getUserPositionInfo = (playerId, div) => {
                var result;
                $.ajax({
                    async: true,
                    url: "/matchesMap/getMatchesMap",
                    data: {"playerId" : playerId},
                    success: function(data) {
                        try {
                            callLoadingBar(false);
                        } catch (e) {

                        }
                        setUserPosition(div, data);
                    },
                    error: function(data) {
                        if (typeof callLoadingBar == 'function') {
                            callLoadingBar(false);
                        }
                        return;
                    }
                }).done(function() {
                    if (typeof callLoadingBar == 'function') {
                        callLoadingBar(false);
                    }
                });
            }

            const setUserPosition = (div, data) => {
                const emptyObj = { "win_count" : 0, "lose_count" : 0, "total_games" : 0};
                drawUserPosition(div, "Í∑πÎ∞©",  data.filter(item => item.POSITION === "Í∑πÎ∞©")[0] || emptyObj); 
                drawUserPosition(div, "Î∞©Î≤®",  data.filter(item => item.POSITION === "Î∞©Î≤®")[0] || emptyObj);                 
                drawUserPosition(div, "Í≥µÎ≤®",  data.filter(item => item.POSITION === "Í≥µÎ≤®")[0] || emptyObj); 
                drawUserPosition(div, "Í∑πÍ≥µ",  data.filter(item => item.POSITION === "Í∑πÍ≥µ")[0] || emptyObj); 
            }

            const drawUserPosition = (div, type, data) => {
                let imgUrl = "/image/position/";
                switch(type){
                    case "Í∑πÎ∞©" : imgUrl += "defence.png";  break;
                    case "Î∞©Î≤®" : imgUrl += "defenceBal.png";  break;
                    case "Í≥µÎ≤®" : imgUrl += "attackBal.png";  break;
                    case "Í∑πÍ≥µ" : imgUrl += "attack.png";  break;
                }

                const {win_count, lose_count, total_games} = data;
                const winRate = ((win_count / total_games) * 100) || 0;
                const infoStr = `${winRate.toFixed(2)}% <br><small class='text-muted'>${win_count}Ïäπ ${lose_count}Ìå®</small>`;

                $(div).append(`
                    <div class="card">
                        <div class="row no-gutters">
                            <div class="col-md-4">
                                <img src="${imgUrl}">
                            </div>
                            <div class="col-md-8">
                                <div class="card-body">
                                    <p id="tankerSpan" class="card-text">${infoStr}</p>
                                </div>
                            </div>
                        </div>
                    </div>`);
            }

            const drawNormalUserInfo = (gameType, divName, data, nickname) => {
                var userDivId = getUserDivId(gameType, nickname);
                if ($("#" + userDivId).length != 0) {
                    return;
                }

                //Í∏∞Î≥∏ Ï†ïÎ≥¥ 
                var clone = $("#template").clone();
                clone.attr("id", userDivId);
                if (divName == "con2_2") {
                    clone.removeClass("infoDiv");
                    clone.addClass("infoDivRed");
                }

                defaultInfoNormal(userDivId, gameType, clone, data, divName != "con3_2");

                var rows = data.matches.rows.filter(row => row.playInfo.playTypeName == "Ï†ïÏÉÅ" || row.playInfo.result == "ÏäπÎ¶¨" ).sort((a, b) => new Date(b.date) - new Date(a.date));
                //printChar(rows);

                //ÌååÌã∞Î≥Ñ
                drawPartyTypeNormal(userDivId, clone.find("#playParty"), rows);

                //Ìè¨ÏßÄÏÖòÎ≥Ñ 
                //drawPositionNormal(clone, rows, data.nickname);

                //ÏûêÏ£ºÌïòÎäî Ï∫êÎ¶≠
                var userChar = extractChar(rows, sortCase);
                drawOftenNormal(clone, userChar, nickname);

                //ÏµúÍ∑º 10Í≤ΩÍ∏∞ Í≤∞Í≥º
                drawRecentlyNormal(clone, rows, userDivId);

                clone.show();
                $("#" + divName).prepend(clone);
            }

            function defaultInfo(divId, gameType, clone, data, tackShow) {
                var rating = data.records.filter(game => game.gameTypeId == gameType)[0] || { loseCount: 0, stopCount: 0, winCount: 0 };
                var pov = ((rating.winCount * 100) / (rating.winCount + rating.loseCount)) || 0;
                let item = $(clone);

                item.find("#nickNameDiv").append(data.nickname);
                item.find("#nickNameDiv").append(` <a href='javascript:nickHistory("${data.playerId}");' ><i class='red fas fas fa-heading'></i></a>`);
                item.find("#levelDiv").text(data.grade + "Í∏â ");
                item.find("#clanDiv").text(data.clanName);

                getTierColerName(item.find("#tierName"), data.tierName);
                if (data.ratingPoint != null) {
                    item.find("#currRP").text(data.ratingPoint);
                    item.find("#maxRP").text("(" + data.maxRatingPoint + ")");
                }
                item.find("#beforeSeason").append(`<a href='javascript:userSeasonRank("${data.playerId}", drawSeasonRank);' >Ï†ÑÏãúÏ¶å</a>`);

                let tot = rating.winCount + rating.loseCount + rating.stopCount;
                item.find("#playGameDiv").append(`<b class="red">ÏäπÎ•†</b> : ${pov.toFixed(0)}% [${tot}Ï†Ñ ${rating.winCount}Ïäπ ${rating.loseCount}Ìå® ${rating.stopCount}Ï§ëÎã®]`);
                item.find("#tack").on("click", () => addTackUser(divId));
                item.find(".tackRemove").on("click", () => removeTackUser(divId));
                if (tackShow) {
                    item.find(".tack").show();
                    item.find(".tackRemove").hide();
                } else {
                    item.find(".tack").hide();
                    item.find(".tackRemove").show();
                }

            }

            function drawSeasonRank(data) {
                if (data.length == 0) {
                    alert("Ï†ÑÏãúÏ¶å Ïñ∏Îû≠");
                } else {
                    let rankText = data.map(row => `${row.season} ${row.rankNumber == 'Î™∞?Î£®?' ? 'Î™∞?Î£®?' : row.rankNumber}ÏúÑ `).join("\n");
                    alert(rankText);
                }
            }

            function getTierColerName(span, tierName) {
                let name = tierName;
                if (name == null) {
                    name = "Unrank";
                }
                span.addClass(name);
                span.text(name);
            }

            function nickHistory(nickId) {
                historyNickname(nickId, showNickHistory);
            }

            function showNickHistory(data) {
                if (data.length == 0 || data.resultCode == -1) {
                    alert("ÏàòÏßëÎêú ÎãâÎ≥ÄÍ∏∞Î°ùÏù¥ ÏóÜÏäµÎãàÎã§");
                    return;
                }

                let info = "";
                for (idx in data) {
                    let row = data[idx];
                    info += row.season + ", " + row.nickname + ", Ï≤¥ÌÅ¨Ïùº:" + row.checkingDate + "\n";
                }

                alert(info);
            }

            $(function () {
                const $dropZone = $('#drop-zone');
                const $result = $('#result');

                // ÎìúÎûòÍ∑∏ Ïò§Î≤Ñ
                $dropZone.on('dragover', function (e) {
                    e.preventDefault();
                    e.stopPropagation();
                    $(this).addClass('dragover');
                });

                // ÎìúÎûòÍ∑∏ Î¶¨Î∏å
                $dropZone.on('dragleave', function (e) {
                    e.preventDefault();
                    e.stopPropagation();
                    $(this).removeClass('dragover');
                });

                // ÎìúÎ°≠
                $dropZone.on('drop', function (e) {
                    e.preventDefault();
                    e.stopPropagation();
                    $(this).removeClass('dragover');

                    const file = e.originalEvent.dataTransfer.files[0];
                    if (!file) return;

                    // ÎØ∏Î¶¨Î≥¥Í∏∞ ÎòêÎäî ÏóÖÎ°úÎìú Ï≤òÎ¶¨
                    uploadImage(file);
                });

                function uploadImage(file) {
                const formData = new FormData();
                formData.append('image', file);

                $result.text('ÏóÖÎ°úÎìú Ï§ë...');

                $.ajax({
                    url: '/user/getOcrNames',
                    type: 'POST',
                    data: formData,
                    processData: false,
                    contentType: false,
                    success: function (data) {
                        inferSearch(data.teamA.join(" "), 'con1_2');
                        inferSearch(data.teamB.join(" "), 'con2_2');
                    },
                    error: function (xhr, status, err) {
                        console.error(err);
                        $result.text('ÏóÖÎ°úÎìú Ïã§Ìå® üò•');
                    }
                });
                }
            });

            const inferSearch = (nicknames, divId)  => {
                if (nicknames && nicknames != "") {
                    $("#nickNames").val(nicknames);
                    search('nickNames', divId);
                }
            }

        </script>
</head>

<body class="body">
    <%- include  ("../layout/menu") %>

    <!-- Ïπ¥Ïπ¥Ïò§ Í¥ëÍ≥† -->
    <%- include  ("../layout/leftBanner") %>

        <div id="mainUserSearch">
            <div class="divContainer" >
                <div class="topUserSearch box box1">
                    <div class="btn-group btn-group-toggle floatLeft" data-toggle="buttons">
                        <label class="btn btn-light active">
                          <input type="radio" name="gameType" id="gameType_rating" value="rating" checked /> Í≥µÏãù
                        </label>
                        <label class="btn btn-light">
                            <input type="radio" name="gameType" id="gameType_normal" value="normal" /> ÏùºÎ∞ò
                        </label>
                        <div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" id="positionShow" checked>
                                <label class="form-check-label" for="positionShow">Ìè¨ÏßÄÏÖò ÎÖ∏Ï∂ú</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" id="partyShow" checked>
                                <label class="form-check-label" for="partyShow">ÌååÌã∞ ÎÖ∏Ï∂ú</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" id="mostCharShow" checked>
                                <label class="form-check-label" for="mostCharShow">ÏûêÏ£ºÌïòÎäî Ï∫êÎ¶≠ ÎÖ∏Ï∂ú</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" id="recentShow" checked>
                                <label class="form-check-label" for="recentShow">ÏµúÍ∑º 10Í≤åÏûÑ ÎÖ∏Ï∂ú</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" id="tackShow" checked>
                                <label class="form-check-label" for="tackShow">Í≥†Ï†ïÌÉ≠ ÎÖ∏Ï∂ú</label>
                            </div>                    
                        </div>
                    </div>                
                </div>

                <div id="topHistory" class="box box2 topHistory" ></div>
                <div id="drop-zone" class="box box3">Îß§Ïπ≠Ïä§ÌÅ¨Î¶∞ÏÉ∑ Ïù¥ÎØ∏ÏßÄÎ•º <br>Ïù¥Í≥≥Ïóê ÎìúÎûòÍ∑∏ Ïï§ ÎìúÎ°≠ÌïòÏÑ∏Ïöî <br>(Î≤†ÌÉÄÏûÖÎãàÎã§.)</div>
            </div>               

            <div id="con1" class="con">
                <h3>Ïö∞Î¶¨ÌåÄ<span class="red gameTypeText"></span></h3><span class="teamRateBlue red"></span>
                <div class="input-group">
                    <input type="text" id="nickNames" class="form-control" placeholder="ÎùÑÏñ¥Ïì∞Í∏∞Î°ú Í≤ÄÏÉâ Í∞ÄÎä• ex) ÎßàÏùÑÏ£ºÎØº1 ÎßàÏùÑÏ£ºÎØº2 ÎßàÏùÑÏ£ºÎØº3 ..." aria-label="ÎùÑÏñ¥Ïì∞Í∏∞Î°ú Í≤ÄÏÉâ Í∞ÄÎä• ex) ÎßàÏùÑÏ£ºÎØº1 ÎßàÏùÑÏ£ºÎØº2 ÎßàÏùÑÏ£ºÎØº3 ..." aria-describedby="searchButton" onKeyPress="if(event.keyCode == 13) { search('nickNames', 'con1_2'); } ">
                    <div class="input-group-append" id="searchButton">
                        <button class="btn btn-outline-secondary" type="button" onClick="search('nickNames', 'con1_2');">Í≤ÄÏÉâ</button>
                        <button class="btn btn-outline-secondary" type="button" onClick="clearDiv('con1_2');">Ï¥àÍ∏∞Ìôî</button>
                    </div>
                </div>
                <div id="con1_2" class="infoLayer"> </div>
            </div>
            <div id="con2" class="con">
                <h3>Ï†ÅÌåÄ<span class="red gameTypeText"></span></h3><span class="teamRateRed red"></span></h3>
                <div class="input-group">
                    <input type="text" id="nickNames2" class="form-control" placeholder="ÎùÑÏñ¥Ïì∞Í∏∞Î°ú Í≤ÄÏÉâ Í∞ÄÎä• ex) ÎßàÏùÑÏ£ºÎØº1 ÎßàÏùÑÏ£ºÎØº2 ÎßàÏùÑÏ£ºÎØº3 ..." aria-label="ÎùÑÏñ¥Ïì∞Í∏∞Î°ú Í≤ÄÏÉâ Í∞ÄÎä• ex) ÎßàÏùÑÏ£ºÎØº1 ÎßàÏùÑÏ£ºÎØº2 ÎßàÏùÑÏ£ºÎØº3 ..." aria-describedby="searchButton" onKeyPress="if(event.keyCode == 13) { search('nickNames2', 'con2_2'); } ">
                    <div class="input-group-append" id="searchButton">
                        <button class="btn btn-outline-secondary" type="button" onClick="search('nickNames2', 'con2_2');">Í≤ÄÏÉâ</button>
                        <button class="btn btn-outline-secondary" type="button" onClick="clearDiv('con2_2');">Ï¥àÍ∏∞Ìôî</button>
                    </div>
                </div>
                <div id="con2_2" class="infoLayer"></div>
            </div>

            <div id="con3" class="con">
                <h3>Í≥†Ï†ï<span class="red gameTypeText"></span></h3>
                <div class="input-group" hidden>
                    <input type="text" id="nickNames3" class="form-control" placeholder="ÎùÑÏñ¥Ïì∞Í∏∞Î°ú Í≤ÄÏÉâ Í∞ÄÎä• ex) ÎßàÏùÑÏ£ºÎØº1 ÎßàÏùÑÏ£ºÎØº2 ÎßàÏùÑÏ£ºÎØº3 ..." aria-label="ÎùÑÏñ¥Ïì∞Í∏∞Î°ú Í≤ÄÏÉâ Í∞ÄÎä• ex) ÎßàÏùÑÏ£ºÎØº1 ÎßàÏùÑÏ£ºÎØº2 ÎßàÏùÑÏ£ºÎØº3 ..." aria-describedby="searchButton" onKeyPress="if(event.keyCode == 13) { search('nickNames3', 'con3_2'); } ">
                    <div class="input-group-append" id="searchButton">
                        <button class="btn btn-outline-secondary" type="button" onClick="search('nickNames3', 'con3_2');">Í≤ÄÏÉâ</button>
                        <button class="btn btn-outline-secondary" type="button" onClick="clearDiv('con3_2');">Ï¥àÍ∏∞Ìôî</button>
                    </div>
                </div>
                <div id="con3_2" style="height: 92%;" class="infoLayer"></div>
            </div>
        </div>


        <div id="template" class="infoDiv" style="display:none">
            <div id="defaultDiv">
                <!-- <div id="gameTypeDiv" class="red bold width100p"></div> -->
                <div class="nicknameLayer width100p">
                    <div id="nickNameDiv" class="nickNameDiv"> </div>
                    <div class="width45p">
                        <span id="levelDiv"></span>&nbsp;&nbsp;
                        <span id="clanDiv"></span>
                    </div>
                    <div class="width50p">
                        <span id="tierName"></span>&nbsp;
                        <span id="currRP" class="bold"></span>
                        <span id="maxRP"></span>
                        <span id="beforeSeason"></span>
                    </div>
                    <div class="tack">
                        <i id="tack" style="margin-right: 2px;font-size: 18px;" class="fas">ÔÇç</i>
                    </div>
                    <div class="tackRemove" style="display:none">
                        <i class='fas fa-window-close' style='font-size:18px;color:red'></i>
                    </div>
                </div>
                <div class="width100p">
                    <div id="playGameDiv"></div>
                </div>
                <div id="playParty" class="playParty width100p"></div>
            </div>

            <!-- Ìè¨ÏßÄÏÖòÎ≥Ñ ÏäπÎ•† -->
            <div id="positionDiv" class="positionDiv"></div>

            <!-- ÏûêÏ£ºÌïòÎäî Ï∫êÎ¶≠-->
            <div id="mostCharDiv" class="mostCharDiv">
                <div id="mostCharTitleDiv" class="width100p">ÏûêÏ£ºÌïòÎäîÏ∫êÎ¶≠ TOP3</div>
                <div id="mostCharDetailDiv" class="mostCharDetailDiv">
                    <div id="cardTemp" class="card" hidden>
                        <div class="row no-gutters">
                            <div class="col-md-4">
                                <!-- <img src="https://img-api.neople.co.kr/cy/characters/5f4c4d6d332766ca219af12dfc41f124">-->
                            </div>
                            <div class="col-md-8">
                                <div class="card-body">
                                    <p class="card-text">
                                        <!-- 57% <br> <small class="text-muted">79Ïäπ 60Ìå® </small>-->
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="recentlyDiv" class="width100p recentlyDiv">
                <div class="width100p" id="recentlyDivTitle">
                    <!--ÏµúÍ∑º 10Í≤åÏûÑ -->
                </div>
            </div>
        </div>

        <div id="modalDiv">
            <!-- Îß§Ïπ≠ Î¶¨Ïä§Ìä∏ -->
            <div id="templateModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="templateModalLabel">
                <div class="modal-dialog modal-2xl" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4 class="modal-title" id="templateModalLabel">ÏµúÍ∑º 10Í≤åÏûÑ</h4>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">√ó</span>
                        </button>
                        </div>
                        <div class="modal-body modal-dialog-scrollable">
                            <table id="templateTable" class="table table-striped table-condensed">
                                <thead class="thead-dark">
                                    <tr>
                                        <th scope="col">ÎÇ†Ïßú</th>
                                        <th scope="col">ÌååÌã∞</th>
                                        <th scope="col">Í≤∞Í≥º</th>
                                        <th scope="col">Char</th>
                                        <th scope="col">Lv</th>
                                        <th scope="col">KDA</th>
                                        <th scope="col">ÎîúÎüâ</th>
                                        <th scope="col">ÌîºÌï¥Îüâ</th>
                                        <th scope="col">ÏÜåÎ™®Ìíà%</th>
                                        <th scope="col"></th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Îß§Ïπ≠ ÏÉÅÏÑ∏ -->
        <div style="display:none">
            <table id="matchInfoTemplate" class="table table-striped table-condensed">
                <thead class="thead-light">
                    <tr>
                        <th scope="col"></th>
                        <th scope="col"></th>
                        <th scope="col">C</th>
                        <th scope="col">ÎãâÎÑ§ÏûÑ</th>
                        <th scope="col">Í∏â</th>
                        <th scope="col">rp</th>
                        <th scope="col">Lv</th>
                        <th scope="col">ÌÇ¨</th>
                        <th scope="col">Îç∞Ïä§</th>
                        <th scope="col">ÎèÑÏõÄ</th>
                        <th scope="col">ÎîúÎüâ</th>
                        <th scope="col">ÌîºÌï¥Îüâ</th>
                        <th scope="col">ÏπòÏú†</th>
                        <th scope="col">Ï≤†Í±∞Î∞ò</th>
                        <th scope="col">ÏÑºÌã∞ÎÑ¨</th>
                        <th scope="col">ÏΩîÏù∏</th>
                        <th scope="col">ÏÜåÎ™®Ìíà(%)</th>
                        <th scope="col"> </th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
</body>

</html>