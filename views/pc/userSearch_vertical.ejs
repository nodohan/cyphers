<!DOCTYPE html>
<html lang="ko">

<head>

    <%- include ("../layout/head") %>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/2.0.3/js.cookie.js"></script>
    <script type="text/javascript">
        pageName = "pcUserSearch_vertical";

        $(document).ready(function () {
            $("#mainMenu").removeClass("active");
            $("#userSearch_vertical").addClass("active");

            getCookie();
            $("#partyShow").on("change", checkVisibility);
            $("#positionShow").on("change", checkVisibility);
            $("#mostCharShow").on("change", checkVisibility);
            $("#recentShow").on("change", checkVisibility);

            resetGameType();
            $("input[name='gameType']").on("change", resetGameType);
        });

        function resetGameType() {
            let val = $("input[name='gameType']:checked").val();
            clearDivV2('con1_2');
            clearDivV2('con2_2');
            $(".gameTypeText").text(val == 'rating' ? '[공식전]' : '[일반전]');
        }

        // function clearDivV2(divId) {
        //     //'infoDivV3Temp'
        //     let className = "infoDivV2Temp";
        //     let imgName = 'infoDivV2TempImg';
        //     if (divId == 'con2_2') {
        //         className = "infoDivV3Temp";
        //         imgName = 'infoDivV3TempImg';
        //     }
        //     let tempInfo = `<div class="${className}"><div class='${imgName}'></div></div>`;
        //     $("#" + divId).empty();
        //     $("#" + divId).append(tempInfo + tempInfo + tempInfo + tempInfo + tempInfo);
        // }

        function getCookie() {
            setCheckbox('partyShow', Cookies.get('playParty'));
            setCheckbox('positionShow', Cookies.get('positionDiv'));
            setCheckbox('mostCharShow', Cookies.get('mostCharDiv'));
            setCheckbox('recentShow', Cookies.get('recentlyDiv'));
        }

        function setCheckbox(id, checked) {
            checked = (checked == null || checked == 'true');
            $("input:checkbox[id='" + id + "']").attr("checked", checked);
        }

        function checkVisibility() {
            setVisible("playParty", $("#partyShow").is(":checked"));
            setVisible("positionDiv", $("#positionShow").is(":checked"));
            setVisible("mostCharDiv", $("#mostCharShow").is(":checked"));
            setVisible("recentlyDiv", $("#recentShow").is(":checked"));
        }

        function setVisible(classId, isShow) {
            let div = $("." + classId);
            if (isShow) {
                div.show();
            } else {
                div.hide();
            }
            Cookies.set(classId, isShow, {
                expires: 7
            });
        }

        function setUserInfo(gameType, divName, data) {
            removeTemp(divName);
            var userDivId = getUserDivId(gameType, data.nickname);
            //기본 정보
            var clone = $("#template").clone();
            clone.attr("id", userDivId);

            console.log("divName", divName);
            if (divName == "con2_2") {
                clone.removeClass("infoDivV2");
                clone.addClass("infoDivV3");
            }

            defaultInfo(gameType, clone, data);

            var rows = data.matches.rows.filter(row => row.playInfo.playTypeName == "정상" || row.playInfo.result == "승리").sort((a, b) => new Date(b.date) - new Date(a.date));
            //printChar(rows);

            //파티별
            drawPartyType(userDivId, clone.find("#playParty"), rows);

            //포지션별
            drawPosition(clone, rows, data.nickname, drawCard2025);

            //최근 10경기 결과
            drawRecently(clone, rows, userDivId);

            //자주하는 캐릭
            var userChar = extractChar(rows, sortCase);
            drawOften(clone, userChar, drawCharCardVer);

            clone.show();
            $("#" + divName).prepend(clone);
            checkVisibility();
        }

        function removeTemp(divId) {
            let tempClass = divId == 'con1_2' ? 'infoDivV2Temp' : 'infoDivV3Temp';
            $("." + tempClass).get(0).remove();
        }

        function defaultInfo(gameType, clone, data) {
            //console.log("data", data);
            var rating = data.records.filter(game => game.gameTypeId == gameType)[0] || {
                loseCount: 0,
                stopCount: 0,
                winCount: 0
            };
            var pov = ((rating.winCount * 100) / (rating.winCount + rating.loseCount)) || 0;

            $(clone).find("#nickNameDiv").append(data.nickname);
            $(clone).find("#nickNameDiv").append(" <a href='javascript:nickHistory(\"" + data.playerId + "\");' ><i class='red fas fas fa-heading'></i></a>");
            $(clone).find("#levelDiv").text(data.grade + "급 ");
            $(clone).find("#clanDiv").text(data.clanName);

            getTierColerName($(clone).find("#tierName"), data.tierName);
            if (data.ratingPoint != null) {
                $(clone).find("#currRP").text(data.ratingPoint);
                $(clone).find("#maxRP").text("(" + data.maxRatingPoint + ")");
            }

            let tot = rating.winCount + rating.loseCount + rating.stopCount;
            $(clone).find("#playGameDiv").append(`<p>전체 ${rating.winCount}승 ${rating.loseCount}패 ${rating.stopCount}중단</p>`);
        }

        function getTierColerName(span, tierName) {
            let name = tierName;
            if (name == null) {
                name = "Unrank";
            }
            span.addClass(name);
            span.text(name);
        }

        function nickHistory(nickId) {
            historyNickname(nickId, showNickHistory);
        }

        function showNickHistory(data) {
            if (data.resultCode == -2) {
                alert("요청자에 의해 비공개 처리되었습니다.");
                return;
            }
            if (data.length == 0 || data.resultCode == -1) {
                alert("수집된 닉변기록이 없습니다");
                return;
            }

            let info = "";
            for (idx in data) {
                let row = data[idx];
                info += row.season + " " + row.nickname + " 체크일:" + row.checkingDate + "\n";
            }


            alert(info);
        }

        //파티별 승률 (솔로/파티)
        function drawPartyType(userDivId, clone, row) {
            let partyJson = extractParty(row);

            let soloAllCnt = partyJson.solo.win + partyJson.solo.lose;
            let partyAllCnt = partyJson.all.win + partyJson.all.lose;

            clone.append(`<b>솔플</b><div><b>${partyJson.solo.win}승</b><b>${partyJson.solo.lose}패</b></div>`);
            clone.append(`<b>파티</b><div><b>${partyJson.all.win}승</b><b>${partyJson.all.lose}패</b></div>`);

            //let moreIcon = '<i class="fa fa-search" style="font-size:15px;color:red"></i>';
            let moreIcon = '<i class="fa fa-search-plus" style="font-size:15px;color:black;"></i>';

            // if (partyJson.two.all != 0) {
            //     clone.append("2인: " + partyJson.two.win + "승 " + partyJson.two.lose + "패 ");
            //     clone.append(`<a data-toggle='collapse' href='#two${userDivId}' role='button' aria-expanded='false' aria-controls='two${userDivId}' >${moreIcon}</a>  `);
            // }
            //
            // if (partyJson.three.all != 0) {
            //     clone.append("3인: " + partyJson.three.win + "승 " + partyJson.three.lose + "패 ");
            //     clone.append(`<a data-toggle='collapse' href='#three${userDivId}' role='button' aria-expanded='false' aria-controls='three${userDivId}' >${moreIcon}</a>  `);
            // }
            //
            // if (partyJson.five.all != 0) {
            //     clone.append("5인: " + partyJson.five.win + "승 " + partyJson.five.lose + "패 ");
            //     clone.append(`<a data-toggle='collapse' href='#five${userDivId}' role='button' aria-expanded='false' aria-controls='five${userDivId}' >${moreIcon}</a>  `);
            // }

            clone.append("<div class='row' style='display: none'>");
            if (partyJson.two.all != 0) {
                let partyResult = getEachPartyResult(partyJson.two.party);
                clone.append("<div class='collapse multi-collapse' id='two" + userDivId + "'>" + partyResult + "</div>");
            }
            if (partyJson.three.all != 0) {
                let partyResult = getEachPartyResult(partyJson.three.party);
                clone.append("<div class='collapse multi-collapse' id='three" + userDivId + "'>" + partyResult + "</div>");
            }
            if (partyJson.five.all != 0) {
                let partyResult = getEachPartyResult(partyJson.five.party);
                clone.append("<div class='collapse multi-collapse' id='five" + userDivId + "'>" + partyResult + "</div>");
            }

            clone.append("</div>");
        }

        function getEachPartyResult(arr) {
            let resultTable = "<table class='table'> ";
            resultTable += "<thead class='thead-dark'><tr>";
            resultTable += "<th scope='col'>파티원</th>";
            resultTable += "<th scope='col'>겜수</th>";
            resultTable += "<th scope='col'>승</th>";
            resultTable += "<th scope='col'>패</th>";
            resultTable += "<th scope='col'>승률</th>";
            resultTable += "</tr></thead><tbody>";

            for (idx in arr) {
                let row = arr[idx];
                let total = row.win + row.lose;
                let rate = ((row.win * 100) / total).toFixed(0) + "%";

                resultTable += "<tr>";
                resultTable += "<th scope='row'> <a href='#' onClick='partyUserSearch(this);' />" + row.name + "</a></th>";
                resultTable += "<td>" + total + "</td>";
                resultTable += "<td>" + row.win + "</td>";
                resultTable += "<td>" + row.lose + "</td>";
                resultTable += "<td>" + rate + "</td>";
                resultTable += "</tr>";

            }
            resultTable += "</tbody></table>";

            return resultTable;
        }

        function partyUserSearch(aTagObj) {
            let aTag = $(aTagObj);
            let partyUserNames = aTag.text().replace(",", " ");
            let conId = aTag.closest(".infoLayerV2").attr("id");
            conId = conId == null ? "con2_2" : conId;

            let inputId = conId == "con1_2" ? 'nickNames' : 'nickNames2';
            $("#" + inputId).val(partyUserNames);
            search(inputId, conId);
        }

        function extractParty(rows) {
            let partyResult = {
                solo: {
                    win: 0,
                    lose: 0
                },
                all: {
                    count: 0,
                    win: 0,
                    lose: 0
                },
                two: {
                    count: 0,
                    win: 0,
                    lose: 0,
                    party: {}
                },
                three: {
                    count: 0,
                    win: 0,
                    lose: 0,
                    party: {}
                },
                five: {
                    count: 0,
                    win: 0,
                    lose: 0,
                    party: {}
                },
            };

            let solo = rows.filter(row => row.playInfo.partyInfo == null);
            partyResult.solo.win = solo.filter(row => row.playInfo.result == 'win').length;
            partyResult.solo.lose = (solo.length - partyResult.solo.win);

            let party = rows.filter(row => row.playInfo.partyInfo != null);
            for (let i in party) {
                let matchId = party[i].matchId;
                let playInfo = party[i].playInfo;
                let cnt = playInfo.partyUserCount;

                addPlayResult(partyResult.all, matchId, playInfo, false);
                if (cnt == 2) {
                    addPlayResult(partyResult.two, matchId, playInfo, true);
                } else if (cnt == 3) {
                    addPlayResult(partyResult.three, matchId, playInfo, true);
                } else if (cnt == 5) {
                    addPlayResult(partyResult.five, matchId, playInfo, true);
                }
            }

            partyResult.two.party = partySort(partyResult.two.party, sortCase);
            partyResult.three.party = partySort(partyResult.three.party, sortCase);
            partyResult.five.party = partySort(partyResult.five.party, sortCase);

            return partyResult;
        }

        function partySort(party, sort) {
            let keys = Object.keys(party);
            var sorted = [];
            keys.forEach(key => {
                sorted.push(party[key]);
            });

            sorted.sort(sort);
            return sorted;
        }

        function addPlayResult(subPartyResult, matchId, data, isParty) {
            subPartyResult[data.result]++;
            subPartyResult["count"]++;

            if (isParty) {
                let partyId = data.partyInfo.map(row => row.playerId).sort().join(",");
                let partyName = data.partyInfo.map(row => row.nickname).sort().join(",");

                if (subPartyResult.party[partyId] == null) {
                    subPartyResult.party[partyId] = {
                        matchId: [],
                        name: "",
                        count: 0,
                        win: 0,
                        lose: 0
                    };
                }
                subPartyResult.party[partyId].count++;
                subPartyResult.party[partyId][data.result]++;
                subPartyResult.party[partyId].name = partyName;
                subPartyResult.party[partyId].matchId.push(matchId);
            }
        }

        function drawCharCardVer(div, charInfo) {
            var card = $(div).find("#cardTemp").clone();
            card.removeAttr("id");
            card.removeAttr("hidden");
            card.find("img").attr('src', `https://img-api.neople.co.kr/cy/characters/${charInfo.characterId}`);
            var pov = ((charInfo.win * 100) / charInfo.count) || 0;
            card.find(".card-text").empty().append(pov.toFixed(0) + "% <br/> <small class='text-muted'>" + charInfo.win + "승<br> " + charInfo.lose + "패</small>");
            div.append(card);
        }

        function sideNavToggle() {
            document.querySelector('.sideNav').classList.toggle('slim');
        }

        function searchInputToggle(e) {
            const parentDiv = e.target.closest('div'); // 클릭된 버튼의 부모 div 찾기
            const searchInput = parentDiv.querySelector('.searchInput'); // 해당 div 내의 input 찾기

            // 모든 활성화된 입력 필드를 닫음
            document.querySelectorAll('.searchInput.active').forEach(input => {
                input.classList.remove('active');
            });

            // 현재 클릭한 버튼의 input만 토글 (닫힌 상태라면 다시 활성화)
            searchInput.classList.toggle('active');

            if (searchInput.classList.contains('active')) {
                searchInput.focus();
                document.addEventListener('click', outsideClickListener);
            }
        }

        function outsideClickListener(e) {
            // 클릭한 요소가 검색 버튼이나 입력 필드가 아니라면 모든 입력 필드를 닫음
            if (!e.target.classList.contains('searchBtn') && !e.target.classList.contains('searchInput')) {
                document.querySelectorAll('.searchInput.active').forEach(input => {
                    input.classList.remove('active');
                });

                document.removeEventListener('click', outsideClickListener); // 이벤트 제거
            }
        }

        const drawCard2025 = (div, type, typeId, positionName, nickname) => {
            let isMap = div.parent().hasClass("mapCard");
            let mapName = div.parent().data("mapname");

            let imgUrl = "http://static.cyphers.co.kr/img/game_position/";
            switch (typeId) {
                case "tanker" :
                    imgUrl += "position1.jpg";
                    break;
                case "melee" :
                    imgUrl += "position2.jpg";
                    break;
                case "ad" :
                    imgUrl += "position3.jpg";
                    break;
                case "supp" :
                    imgUrl += "position4.jpg";
                    break;
            }

            let infoStr = "0% <br><small class=''> 0승 0패</small>";

            if (type != null) {
                const gameType = $("input[name='gameType']:checked").val();
                const modalId = `pop${nickname}_${gameType}_${typeId}_modal`;
                const moreIcon = '<i class="fa fa-search-plus" style="font-size:15px;color:black;"></i>';
                let moreAlink;
                if (isMap) {
                    moreAlink = `<a href='#' data-toggle="modal" data-target="#${modalId}" onClick="javascript:playGameMapList('${positionName}', '${mapName}', 'position');">${moreIcon}</a>`;
                } else {
                    moreAlink = `<a href='#' data-toggle="modal" data-target="#${modalId}" onClick="javascript:playGameList('${positionName}', null, '${nickname}', 'position', '${modalId}' );">${moreIcon}</a>`;
                }

                infoStr = `${type.rate.toFixed(0)}% ${moreAlink}<br><small class='text-muted'>${type.rateInfo}</small>`;
            }

            $(div).append(`
                        <div class="positionWrap halfFr">
                            <div class="positionWrapImg doubleFr">
                                <img src="${imgUrl}" alt="">
                            </div>
                            <div class="positionWrapText quadrupleFr">
                                <div class="">
                                    <p id="tankerSpan" class="">${infoStr}</p>
                                </div>
                            </div>
                        </div>`);
        }


    </script>
</head>

<body class="body">
<%- include ("../layout/menu") %>

<div id="mainV2">
    <div class="sideNav slim">
        <button type="button" class="sideNavToggleBtn" onclick="sideNavToggle()">
        </button>
        <h2>전적검색 (가로)</h2>
        <div class="searchInputWrap">
            <div>
                <button type="button" class="searchBtn" onclick="searchInputToggle(event)"></button>
                <input type="text" id="nickNames" class="searchInput" placeholder="아군으로 검색"
                       aria-label="띄어쓰기로 검색 가능 ex) 마을주민1 마을주민2 마을주민3 ..." aria-describedby="searchButton"
                       onKeyPress="if(event.keyCode == 13) { search('nickNames', 'con1_2'); } ">
                <!--                        <button type="button" onClick="search('nickNames', 'con1_2');"></button>-->
            </div>
            <!--                <div class="input-group-append" id="searchButton">-->
            <!--                    <button class="iconBtn resetBtn" type="button" onClick="clearDivV2('con1_2');">초기화</button>-->
            <!--                </div>-->
            <div>
                <button type="button" class="searchBtn" onclick="searchInputToggle(event)"></button>
                <input type="text" id="nickNames2" class="searchInput" placeholder="적팀으로 검색"
                       aria-label="띄어쓰기로 검색 가능 ex) 마을주민1 마을주민2 마을주민3 ..." aria-describedby="searchButton"
                       onKeyPress="if(event.keyCode == 13) { search('nickNames2', 'con2_2'); } ">
                <!--                        <button type="button" onClick="search('nickNames2', 'con2_2');"></button>-->
            </div>
            <!--                <div class="input-group-append" id="searchButton">-->
            <!--                    <button class="iconBtn resetBtn" type="button" onClick="clearDivV2('con2_2');">초기화</button>-->
            <!--                </div>-->
        </div>

        <div class="head">
            <div class="inputWrap">
                <div class="gameModeCheck">
                    <input class="officialGameCheck" type="radio" name="gameType" id="gameType_rating" value="rating"
                           checked/>
                    <label class="" for="gameType_rating"> 공식 </label>
                    <input class="normalGameCheck" type="radio" name="gameType" id="gameType_normal" value="normal"/>
                    <label class="" for="gameType_normal"> 일반 </label>
                </div>
                <div class="searchSettingCheck">
                    <input class="checkPosition positionBtn" type="checkbox" id="positionShow" checked>
                    <label class="iconBtn" for="positionShow">포지션 노출</label>
                </div>
                <div class="searchSettingCheck">
                    <input class="checkParty partyBtn" type="checkbox" id="partyShow" checked>
                    <label class="iconBtn" for="partyShow">파티 노출</label>
                </div>
                <div class="searchSettingCheck">
                    <input class="checkMost mostBtn" type="checkbox" id="mostCharShow" checked>
                    <label class="iconBtn" for="mostCharShow">자주하는 캐릭 노출</label>
                </div>
                <div class="searchSettingCheck">
                    <input class="checkRecent recentBtn" type="checkbox" id="recentShow" checked>
                    <label class="iconBtn" for="recentShow">최근 10게임 노출</label>
                </div>
            </div>
        </div>
    </div>
    <div id="con1" class="conUserV2">
        <div id="con1_2" class="infoLayerV2"><div id="김치맹_rating" class="infoDivV2 cardLayout" style=""> <!--grid 12column-->
                <div class="overlay"></div>
                <div id="defaultDiv">
                    <div class="cardHeader joker">
                        <div class="infoDefalut">
                            <section>
                                <div class="cardGrade">
                                    <span id="levelDiv" class="cardUserLevel ">77급 </span>
                                    <span id="clanDiv" class="cardUserClan">누비누비</span>
                                </div>
                                <div class="cardNick">
                                    <span id="nickNameDiv" class="cardUserName">김치맹 <a href="javascript:nickHistory(&quot;4a44d0ebb7e97aa8885f3ed4c1e0c245&quot;);"><i class="red fas fas fa-heading"></i></a></span>
                                </div>
                            </section>
                            <section>
                                <div class="cardTier">
                                    <span id="tierName" class="JOKER 3RD">JOKER 3RD</span>
                                </div>
                                <div class="cardRp">
                                    <span id="currRP">1746</span>
                                    <span id="maxRP">(1797)</span>
                                </div>
                            </section>
                        </div>
                        <div class="infoWinrate">
                            <div id="playGameDiv" class="">
                                <div>
                                    <p>승률 57%</p>
                                    <b>72승 55패 1중단</b>
                                </div>
                            </div>
                            <div id="playParty" class="playParty">
                                <div>
                                    <p>솔플 57%</p>
                                    <b>71승</b><b>51패</b>
                                </div>
                                <div>
                                    <p>파티 57%</p>
                                    <b>1승</b><b>3패</b>
                                </div>
                                <div class="row" style="display: none"></div><div class="collapse multi-collapse" id="two김치맹_rating"><table class="table"> <thead class="thead-dark"><tr><th scope="col">파티원</th><th scope="col">겜수</th><th scope="col">승</th><th scope="col">패</th><th scope="col">승률</th></tr></thead><tbody><tr><th scope="row"> <a href="#" onclick="partyUserSearch(this);">고수달</a></th><td>4</td><td>1</td><td>3</td><td>25%</td></tr></tbody></table></div><div class="collapse multi-collapse" id="three김치맹_rating"><table class="table"> <thead class="thead-dark"><tr><th scope="col">파티원</th><th scope="col">겜수</th><th scope="col">승</th><th scope="col">패</th><th scope="col">승률</th></tr></thead><tbody></tbody></table></div><div class="collapse multi-collapse" id="five김치맹_rating"><table class="table"> <thead class="thead-dark"><tr><th scope="col">파티원</th><th scope="col">겜수</th><th scope="col">승</th><th scope="col">패</th><th scope="col">승률</th></tr></thead><tbody></tbody></table></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 포지션별 승률 -->
                <div id="positionDiv" class="positionDiv">
                    <div class="positionWrap halfFr">
                        <div class="positionWrapImg doubleFr">
                            <img src="http://static.cyphers.co.kr/img/game_position/position1.jpg" alt="">
                        </div>
                        <div class="positionWrapText quadrupleFr">
                            <div class="">
                                <p id="tankerSpan" class="">51% <a href="#" data-toggle="modal" data-target="#pop김치맹_rating_tanker_modal" onclick="javascript:playGameList('탱커', null, '김치맹', 'position', 'pop김치맹_rating_tanker_modal' );"><i class="fa fa-search-plus" style="font-size:15px;color:black;"></i></a><br><small class="text-muted">34승 33패</small></p>
                            </div>
                        </div>
                    </div>
                    <div class="positionWrap halfFr">
                        <div class="positionWrapImg doubleFr">
                            <img src="http://static.cyphers.co.kr/img/game_position/position2.jpg" alt="">
                        </div>
                        <div class="positionWrapText quadrupleFr">
                            <div class="">
                                <p id="tankerSpan" class="">59% <a href="#" data-toggle="modal" data-target="#pop김치맹_rating_melee_modal" onclick="javascript:playGameList('근거리딜러', null, '김치맹', 'position', 'pop김치맹_rating_melee_modal' );"><i class="fa fa-search-plus" style="font-size:15px;color:black;"></i></a><br><small class="text-muted">26승 18패</small></p>
                            </div>
                        </div>
                    </div>
                    <div class="positionWrap halfFr">
                        <div class="positionWrapImg doubleFr">
                            <img src="http://static.cyphers.co.kr/img/game_position/position3.jpg" alt="">
                        </div>
                        <div class="positionWrapText quadrupleFr">
                            <div class="">
                                <p id="tankerSpan" class="">50% <a href="#" data-toggle="modal" data-target="#pop김치맹_rating_ad_modal" onclick="javascript:playGameList('원거리딜러', null, '김치맹', 'position', 'pop김치맹_rating_ad_modal' );"><i class="fa fa-search-plus" style="font-size:15px;color:black;"></i></a><br><small class="text-muted">1승 1패</small></p>
                            </div>
                        </div>
                    </div>
                    <div class="positionWrap halfFr">
                        <div class="positionWrapImg doubleFr">
                            <img src="http://static.cyphers.co.kr/img/game_position/position4.jpg" alt="">
                        </div>
                        <div class="positionWrapText quadrupleFr">
                            <div class="">
                                <p id="tankerSpan" class="">85% <a href="#" data-toggle="modal" data-target="#pop김치맹_rating_supp_modal" onclick="javascript:playGameList('서포터', null, '김치맹', 'position', 'pop김치맹_rating_supp_modal' );"><i class="fa fa-search-plus" style="font-size:15px;color:black;"></i></a><br><small class="text-muted">11승 2패</small></p>
                            </div>
                        </div>
                    </div></div>

                <!-- 자주하는 캐릭-->
                <div id="mostCharTitleDiv" class="width100p mostTitle">자주하는캐릭 TOP6</div>
                <div id="mostCharDiv" class="mostCharDiv mostWrap">
                    <div id="mostCharDetailDiv" class="mostCharDetailDivV2 mostCharItem">
                        <div id="cardTemp" class="" hidden="">
                            <img class="card-img-top" src="http://static.cyphers.co.kr/img/game_position/position1.jpg">
                            <div class="">
                                <p id="tankerSpan" class="card-text">57% <br> <small class="">79승 60패</small></p>
                            </div>
                        </div>
                        <div class="">
                            <img class="card-img-top" src="https://img-api.neople.co.kr/cy/characters/f3f7129ae7ea788755fc16f938523652">
                            <div class="">
                                <p id="tankerSpan" class="card-text">67% <br> <small class="text-muted">20승<br> 10패</small></p>
                            </div>
                        </div><div class="">
                            <img class="card-img-top" src="https://img-api.neople.co.kr/cy/characters/cf6008394ebfb5d0de83fa05834018db">
                            <div class="">
                                <p id="tankerSpan" class="card-text">63% <br> <small class="text-muted">12승<br> 7패</small></p>
                            </div>
                        </div><div class="">
                            <img class="card-img-top" src="https://img-api.neople.co.kr/cy/characters/c603a74ba02374026a535dc53e5b8d40">
                            <div class="">
                                <p id="tankerSpan" class="card-text">85% <br> <small class="text-muted">11승<br> 2패</small></p>
                            </div>
                        </div><div class="">
                            <img class="card-img-top" src="https://img-api.neople.co.kr/cy/characters/627db8b10d95ba73f0d2765130430454">
                            <div class="">
                                <p id="tankerSpan" class="card-text">33% <br> <small class="text-muted">4승<br> 8패</small></p>
                            </div>
                        </div><div class="">
                            <img class="card-img-top" src="https://img-api.neople.co.kr/cy/characters/29863fca436fc32196f3b07b1b80d6eb">
                            <div class="">
                                <p id="tankerSpan" class="card-text">36% <br> <small class="text-muted">4승<br> 7패</small></p>
                            </div>
                        </div><div class="">
                            <img class="card-img-top" src="https://img-api.neople.co.kr/cy/characters/1e2129fcb1eebba2101ee5de6c4b168a">
                            <div class="">
                                <p id="tankerSpan" class="card-text">50% <br> <small class="text-muted">3승<br> 3패</small></p>
                            </div>
                        </div></div>
                </div>
                <div id="recentlyDiv" class="width100p recentlyDiv">
                    <div class="width100p recentGame" id="recentlyDivTitle">최근 게임:
                        <!--최근 10게임 -->
                        <span class="red">승</span> <span class="blue">패</span> <span class="blue">패</span> <span class="red">승</span> <span class="red">승</span> <span class="red">승</span> <span class="blue">패</span> <span class="red">승</span> <span class="blue">패</span> <span class="red">승</span> <a data-toggle="modal" data-target="#pop김치맹_ratingModal">&nbsp;<i class="fa fa-search-plus" style="font-size:15px;color:black"></i></a></div>
                </div>
            </div><div class="infoDivV2Temp"><div class="infoDivV2TempImg"></div></div><div class="infoDivV2Temp"><div class="infoDivV2TempImg"></div></div><div class="infoDivV2Temp"><div class="infoDivV2TempImg"></div></div><div class="infoDivV2Temp"><div class="infoDivV2TempImg"></div></div></div>
    </div>
    <div id="con1" class="conUserV2">
        <div id="con1_2" class="infoLayerV2">

        </div>
    </div>
    <div id="con2" class="conUserV2">
        <div id="con2_2" class="infoLayerV2"></div>
    </div>
</div>

<div id="template" class="infoDivV2 cardLayout" style="display:none"> <!--grid 12column-->
    <div id="defaultDiv">
        <!-- <div id="gameTypeDiv" class="red bold width100p"></div> -->
        <div class="cardHeaderWrap">
            <div class="width100p cardNameWrap halfFr"> <!--6fr-->
                <div class="halfFr">
                    <span id="levelDiv" class="cardUserLevel "></span>
                    <span id="clanDiv" class="cardUserClan"></span>
                </div>
                <span id="nickNameDiv" class="cardUserName halfFr"></span>
                <span id="tierName" class="halfFr"></span>
                <div class="halfFr">
                    <span id="currRP" class="bold"></span>
                    <span id="maxRP" class=""></span>
                </div>
            </div>
            <div id="playParty" class="playParty width100p halfFr">

            </div>
        </div>
        <div class="width100p fullFr">
            <div id="playGameDiv"></div>
        </div>
    </div>

    <!-- 포지션별 승률 -->
    <div id="positionDiv" class="positionDiv">
        <div id="positionTanker" class="width50p">
            <div class="">
                <div class="">
                    <img src="http://static.cyphers.co.kr/img/game_position/position1.jpg">
                </div>
                <div class="">
                    <div class="">
                        <p id="tankerSpan" class="">57% <br> <small class="">79승 60패</small></p>
                    </div>
                </div>
            </div>
        </div>

        <div id="positionMelee" class="width50p">
            <div class="">
                <div class="">
                    <img src="http://static.cyphers.co.kr/img/game_position/position2.jpg">
                </div>
                <div class="">
                    <div class="">
                        <p id="meleeSpan" class="">57% <br> <small class="">79승 60패</small></p>
                    </div>
                </div>
            </div>
        </div>

        <div id="positionAd" class="width50p">
            <div class="">
                <div class="">
                    <img src="http://static.cyphers.co.kr/img/game_position/position3.jpg">
                </div>
                <div class="">
                    <div class="">
                        <p id="adSpan" class="">57% <br> <small class="">79승 60패</small></p>
                    </div>
                </div>
            </div>
        </div>

        <div id="positionSupp" class="width50p">
            <div class="">
                <div class="">
                    <img src="http://static.cyphers.co.kr/img/game_position/position4.jpg">
                </div>
                <div class="">
                    <div class="">
                        <p id="suppSpan" class=""></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 자주하는 캐릭-->
    <div id="mostCharTitleDiv" class="width100p mostTitle">자주하는캐릭 TOP3</div>
    <div id="mostCharDiv" class="mostCharDiv mostWrap">
        <div id="mostCharDetailDiv" class="mostCharDetailDivV2 mostCharItem">
            <div id="cardTemp" class="" hidden>
                <img class="card-img-top" src="http://static.cyphers.co.kr/img/game_position/position1.jpg">
                <div class="">
                    <p id="tankerSpan" class="card-text">57% <br> <small class="">79승 60패</small></p>
                </div>
            </div>
        </div>
    </div>
    <div id="recentlyDiv" class="width100p recentlyDiv">
        <div class="width100p recentGame" id="recentlyDivTitle">
            <!--최근 10게임 -->
        </div>
    </div>
</div>

<div id="modalDiv">
    <!-- 모달 영역 -->
    <div id="templateModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="templateModalLabel">
        <div class="modal-dialog modal-xl" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title" id="templateModalLabel">최근 10게임</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">×</span>
                    </button>
                </div>
                <div class="modal-body modal-dialog-scrollable">
                    <table id="templateTable" class="table table-striped table-condensed">
                        <thead class="thead-dark">
                        <tr>
                            <th scope="col">날짜</th>
                            <th scope="col">파티</th>
                            <th scope="col">결과</th>
                            <th scope="col">P</th>
                            <th scope="col">Char</th>
                            <th scope="col">Lv</th>
                            <th scope="col">KDA</th>
                            <th scope="col">딜량</th>
                            <th scope="col">피해량</th>
                            <th scope="col">소모품%</th>
                            <th scope="col"></th>
                        </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<div style="display:none">
    <table id="matchInfoTemplate" class="table table-striped table-condensed">
        <thead class="thead-light">
        <tr>
            <th scope="col"></th>
            <th scope="col">C</th>
            <th scope="col">P</th>
            <th scope="col">buff</th>
            <th scope="col">닉네임</th>
            <th scope="col">Lv</th>
            <th scope="col">KDA</th>
            <th scope="col">킬</th>
            <th scope="col">데스</th>
            <th scope="col">도움</th>
            <th scope="col">딜량</th>
            <th scope="col">피해량</th>
            <th scope="col">코인</th>
            <th scope="col">소모품(%)</th>
            <th scope="col"></th>
        </tr>
        </thead>
        <tbody></tbody>
    </table>
</div>
</body>

</html>