
<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta property="title" content="마을주민검색기" />
    <meta property="og:title" content="마을주민검색기" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="http://doseh.co.kr" />
    <meta property="og:image" content="http://doseh.co.kr/favicon.ico" />
    <meta name="keyword" content="마을주민검색기, 마을주민 검색기, 마을주민1검색기, 사이퍼즈">
    <meta name="naver-site-verification" content="cd47685c13117b024f3dc2b890bb9b4d377b3dfa" /><!-- 네이버 인증 -->

    <title>마을주민검색기</title>

    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/common.css">
    <link rel="stylesheet" href="/css/menu.css">

    <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
    <script src="/bootstrap/bootstrap.min.js"></script>
    <script src="/js/myLocalStorage.js" crossorigin="anonymous"></script>
    <script src="/js/common.js" crossorigin="anonymous"></script>
    <script src="/js/apiCall.js" crossorigin="anonymous"></script>
    <script src="/js/normalDraw.js" crossorigin="anonymous"></script>
    <script src="/js/ieChecker.js" crossorigin="anonymous"></script>
    <script src="/js/positionAttr.js" crossorigin="anonymous"></script>
    <!-- <script src="/js/utils.js"></script>-->

    <!-- 데이트 피커 -->
    <script src="https://unpkg.com/gijgo@1.9.13/js/gijgo.min.js" type="text/javascript"></script>
    <script src="/js/gijgo-combined-1.9.13/message/messages.kr-ko.js" type="text/javascript"></script>
    <link href="https://unpkg.com/gijgo@1.9.13/css/gijgo.min.css" rel="stylesheet" type="text/css" />

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9883938094775799" crossorigin="anonymous"></script>


    <script type="text/javascript">
        var isMobile = false;

        $(document).ready(function() {
            $("#mainMenu").addClass("active");
            $("#userDetailMenu").removeClass("active");
        });
    </script>
    <script src="/js/charImage.js" crossorigin="anonymous"></script>
    <script type="text/javascript">
        var myChart;

        $(document).ready(function() {
            $("#mainMenu").removeClass("active");
            getStats("statsCountList", drawCount);
            getStats("statsList", drawStatsList);
        });

        function drawCount(data) {
            let div = $("#statsCountDiv");
            div.empty();

            let table = "<table class='table table-bordered table-striped'>";
            let tr = "<thead><tr>";
            let tbody = "<tbody><tr>";
            let endTbody = "</tr></tbody></table>";

            let th = "";
            let td = "";
            let trCount = 1;
            let first = true;
            for (idx in data.row) {
                let item = data.row[idx];
                th += "<th>" + replaceEngToKo(item.dates) + "</th>";
                td += "<td>" + item.cnt.toLocaleString() + "</td>";
                if (trCount % 7 == 0) {
                    let newTable = table + tr + th + tbody + td + endTbody;
                    th = "";
                    td = "";
                    if (first) {
                        $("#statsCountDiv").append(newTable);
                        first = false;
                    } else {
                        $("#moreCountDiv").append(newTable);
                    }
                }
                trCount++;
            }
        }

        function replaceEngToKo(date) {
            return date
                .replace("Monday", "월")
                .replace("Tuesday", "화")
                .replace("Wednesday", "수")
                .replace("Thursday", "목")
                .replace("Friday", "금")
                .replace("Saturday", "토")
                .replace("Sunday", "일");
        }

        function drawStatsList(data) {
            let wList = dataFilter(data.row, "W", "TANKER", "DESC");
            setStatsWDueDate("W", wList[0]);
            drawStatsListDiv("wBestTanker", wList);
            drawStatsListDiv("wWorstTanker", dataFilter(data.row, "W", "TANKER", "ASC"));
            drawStatsListDiv("wBestAttack", dataFilter(data.row, "W", "ATTACK", "DESC"));
            drawStatsListDiv("wWorstAttack", dataFilter(data.row, "W", "ATTACK", "ASC"));

            let mList = dataFilter(data.row, "M", "TANKER", "DESC");
            setStatsWDueDate("M", mList[0]);
            drawStatsListDiv("mBestTanker", mList);
            drawStatsListDiv("mWorstTanker", dataFilter(data.row, "M", "TANKER", "ASC"));
            drawStatsListDiv("mBestAttack", dataFilter(data.row, "M", "ATTACK", "DESC"));
            drawStatsListDiv("mWorstAttack", dataFilter(data.row, "M", "ATTACK", "ASC"));
        }

        function dataFilter(row, statsType, combiType, order) {
            let list = row.filter(item => item.statsType == statsType)
                .filter(item => item.combiType == combiType)
                .filter(item => item.order == order)
                .sort(order == "DESC" ? lateDesc : lateAsc);
            return list;
        }

        function setStatsWDueDate(type, item) {
            if (item == null) {
                return;
            }

            let span = (type == "W") ? $("#wDueSpan") : $("#mDueSpan");
            span.empty();
            span.append(item.statsFromDate + "~" + item.statsToDate);
        }

        function drawStatsListDiv(divId, data) {
            var table = $("#matchInfoTemplate").clone();
            table.removeAttr("id");
            let tbody = table.find("tbody");

            if (data.length == 0) {
                let tr = "<tr><td colspan='5'>데이터가 없습니다.</td></tr>";
                tbody.append(tr);
            }

            let idx = 0;
            for (idx in data) {
                if (idx >= 5) {
                    break;
                }
                let row = data[idx];
                let tr = "<tr>";
                tr += "<td>" + getChars(row.combi.split("|")) + "</td>";
                tr += "<td>" + row.total + "</td>";
                tr += "<td>" + row.win + "</td>";
                tr += "<td>" + row.lose + "</td>";
                tr += "<td>" + row.late + "%</td>";
                tbody.append(tr);
            }

            $("#" + divId).append(table);
        }

        function getChars(arr) {
            let images = "";
            if (arr == "") {
                return "<spna style='font-size:32px;'>탱커 없음</span>";
            }
            for (idx in arr) {
                images += "&nbsp;&nbsp;&nbsp;<img data-item='" + arr[idx] + "' src='https://img-api.neople.co.kr/cy/characters/" + charMap.get(arr[idx]) + "'>"
            }
            return images;
        }

        function getStats(url, callback) {
            var result;
            $.ajax({
                async: true,
                url: "/stats/" + url,
                success: function(data) {
                    if (data.resultCode == -1) {
                        return;
                    }
                    callback(data);
                },
                error: function(data) {
                    return;
                }
            }).done(function() {

            });
            return result;
        }
    </script>
</head>

<body class="body">
<script type="text/javascript">
    function notOpper() {
        alert("이전시즌의 데이터로 당분간 제공하지 않습니다.");
    }
</script>

<header class="active">
    <h1>
        <a class="navbar-brand" href="/">
            <img src="/image/titleIcon.png" class="mainIcon" alt="">
        </a>
    </h1>
    <nav>
        <ul>
            <li>
                <a class="nav-link" href="/user/userSearch">전적 검색</a>
                <ul>
                    <li>
                        <a class="nav-link" href="/user/userSearch">가로</a>
                    </li>
                    <li>
                        <a class="nav-link" href="/user/userSearch">세로</a>
                    </li>
                    <li>
                        <a class="nav-link" href="/user/userSearch">상세</a>
                    </li>
                </ul>
            </li>
            <li>
                <a class="nav-link" href="/user/userSearch">특수</a>
                <ul>
                    <li>
                        <a class="nav-link" href="/user/userSearch">갈등을 빚자</a>
                    </li>
                    <li>
                        <a class="nav-link" href="/user/userSearch">인간상성</a>
                    </li>
                    <li>
                        <a class="nav-link" href="/user/userSearch">닉변이력</a>
                    </li>
                </ul>
            </li>
            <li>
                <a class="nav-link" href="/user/userSearch">통계</a>
                <ul>
                    <li>
                        <a class="nav-link" href="/user/userSearch">특성통계</a>
                    </li>
                    <li>
                        <a class="nav-link" href="/user/userSearch">랭킹 차트</a>
                    </li>
                    <li>
                        <a class="nav-link" href="/user/userSearch">결산</a>
                    </li>
                </ul>
            </li>
            <li>
                <a class="nav-link" href="/user/userSearch">기타</a>
                <ul>
                    <li>
                        <a class="nav-link" href="/user/userSearch">공지</a>
                    </li>
                    <li>
                        <a class="nav-link" href="/user/userSearch">팀나눠</a>
                    </li>
                    <li>
                        <a class="nav-link" href="/user/userSearch">마주클</a>
                    </li>
                    <li>
                        <a class="nav-link" href="/user/userSearch">android</a>
                    </li>
                </ul>
            </li>
        </ul>
    </nav>
</header>

<div id="bi" style="position: fixed;right: 15px;bottom: 5px;">
    <a href="http://developers.neople.co.kr" target="_blank">
        <img style="width:132px;height:37px" alt="Neople 오픈 API" src="/image/bi_color.png" />
    </a>
</div>

<div id="statsMain">
    <div class="topNoheight">
        <h3>주간 공식 집계 판수
            <i class="fas fa-angle-double-down" data-toggle="collapse" data-target="#moreCountDiv" aria-expanded="true"></i>
        </h3>
        <div id="statsCountDiv">

        </div>

        <div id="moreCountDiv" class="collapse">

        </div>
    </div>
    <div id="con1" class="conLayer">
        <span class="h3Span"> 최근 30일 조합 </span> ( <span id="mDueSpan"> 2022-01-01 ~ 2022-01-31 </span> )
        <div class="conStats">
            <h4>BEST 5</h4>
            <div id="mBestTanker">
                <h5>탱커</h5>
            </div>
            <div id="mBestAttack">
                <h5>딜러</h5>
            </div>
        </div>
        <div class="conStats">
            <h4>WORST 5</h4>
            <div id="mWorstTanker">
                <h5>탱커</h5>
            </div>
            <div id="mWorstAttack">
                <h5>딜러</h5>
            </div>
        </div>
    </div>
    <div id="con2" class="conLayer">
        <span class="h3Span"> 금주 조합 </span> ( <span id="wDueSpan"> 2022-01-01 ~ 2022-01-31 </span> )
        <div class="conStats">
            <h4>BEST 5</h4>
            <div id="wBestTanker">
                <h5>탱커</h5>
            </div>
            <div id="wBestAttack">
                <h5>딜러</h5>
            </div>
        </div>
        <div class="conStats">
            <h4>WORST 5</h4>
            <div id="wWorstTanker">
                <h5>탱커</h5>
            </div>
            <div id="wWorstAttack">
                <h5>딜러</h5>
            </div>
        </div>
    </div>

    <!-- 카카오 광고 -->
    <div class="rightBanner">
        <!-- <a href="https://arca.live/b/actioncyphers/112431793?p=1" target="_blank">
            <img src="/image/nodoBanner.webp" class="nodoBanner" />
        </a>     -->
        <ins class="kakao_ad_area" style="display:none;" data-ad-unit="DAN-9nj9qEee6Ciigf2K" data-ad-width="160" data-ad-height="600"></ins>
        <script type="text/javascript" src="//t1.daumcdn.net/kas/static/ba.min.js" async></script>
    </div>

</div>


<div style="display:none">
    <table id="matchInfoTemplate" class="table table-striped table-condensed">
        <thead class="thead-light">
        <tr>
            <th scope="col">조합</th>
            <th scope="col">판수</th>
            <th scope="col">승</th>
            <th scope="col">패</th>
            <th scope="col">승률</th>
        </tr>
        </thead>
        <tbody></tbody>
    </table>
</div>


</body>

</html>